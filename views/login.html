<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/app.css" />
    <link rel="icon" type="image/x-icon" href="/images/logo.png">
    <title>Document</title>
</head>
<body class="bg-black">
    <section class="flex items-center justify-center min-h-screen ">
        <div>
            <div class="grid justify-center m-8">
                <img class="w-20" src="/images/twitter_bird_logo.png" alt="twitter logo">
            </div>
            <h1 class="my-2 text-2xl text-white">Sign In</h1>
            <form class="grid gap-2" method="POST" onsubmit="login(); return false">
                <label class="text-white" for="email">Email</label>
                <input class="p-2 text-sm" name="user_email" type="text" placeholder="Please insert your email">
                <label class="text-white" for="password">Password</label>
                <input class="p-2 text-sm" name="user_password" type="password" placeholder="Please insert your password">
                <div class="hidden"><span class="text-xs text-red-600">*Email not found</span></div>
                <button type="submit" class="p-2 text-xl text-white rounded-full bg-sky-500">Sign In</button>
            </form>
            <a class="text-xs text-gray-600" href="/forgot-password">forgot your password?</a>
        </div>
</section>
<script>
    async function login(){
        const frm = event.target 
        console.log(new FormData(frm))
        const conn = await fetch("/login", {
            method: "POST",
            body: new FormData(frm)

        })
        const data = await conn.json()
        console.log("User created", data)
        const user_email = frm.querySelector("input[name='user_email']").value
        console.log(user_email)
        location.href = "/"
        console.log("redirect")
        

    }
</script>
</body>
</html>